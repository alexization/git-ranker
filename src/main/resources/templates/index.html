<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Git Ranker - 개발자 전투력 측정기</title>

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.git-ranker.com">
    <meta property="og:title" content="Git Ranker - 개발자 전투력 측정기">
    <meta property="og:description" content="단순 커밋 수가 아닌, 코드의 품질과 기여도로 당신의 티어를 확인하세요.">
    <meta property="og:image" content="https://www.git-ranker.com/og-image.png">

    <link rel="icon" type="image/x-icon" href="https://www.git-ranker.com/favicon.ico">

    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <link href="/css/style.css" rel="stylesheet">
</head>
<body>

<div id="loadingOverlay" class="loading-overlay">
    <div class="spinner-border text-light" style="width: 3rem; height: 3rem;" role="status"></div>
    <div class="mt-3 fs-4">GitHub 데이터를 분석 중입니다...</div>
    <div class="text-white-50 small">(최대 10초 정도 소요될 수 있습니다)</div>
</div>

<header class="hero-section">
    <div class="container text-center">
        <h1 class="display-4 fw-bold"><i class="fab fa-github"></i> Git Ranker</h1>
        <p class="lead">단순 커밋 수가 아닌, <strong>코드의 품질과 기여도</strong>로 당신의 티어를 확인하세요.</p>
        <div class="mt-4">
            <a href="https://github.com/alexization/git-ranker" target="_blank" class="btn btn-outline-light px-4 py-2 rounded-pill">
                <i class="fas fa-file-lines me-2"></i>Git Ranker 사용 가이드
            </a>
        </div>
    </div>
</header>

<main class="container">
    <section class="row justify-content-center mb-5">
        <div class="col-md-6">
            <div class="input-group input-group-lg shadow-sm">
                <span class="input-group-text bg-white"><i class="fab fa-github"></i></span>
                <input type="text" id="usernameInput" class="form-control" placeholder="GitHub Username 입력" aria-label="Username">
                <button class="btn btn-dark px-4" type="button" onclick="registerUser()">분석하기</button>
            </div>
        </div>
    </section>

    <section id="resultSection" class="mb-5 d-none">
        <div class="card shadow border-0">
            <div class="card-body p-4">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-center border-end-lg mb-4 mb-lg-0">
                        <img id="resProfileImage" src="" alt="Profile" class="rounded-circle mb-3 shadow-sm" width="120" height="120">
                        <div>
                            <i id="resTierIcon" class="fas fa-gem tier-icon"></i>
                            <h3 id="resTierText" class="fw-bold mb-1"></h3>
                            <p class="text-muted mb-0">
                                상위 <span id="resPercentile" class="fw-bold text-dark font-code"></span>%
                                (<span id="resRanking" class="font-code"></span>위)
                            </p>
                        </div>
                        <div class="mt-4">
                            <a id="resGithubLink" href="#" target="_blank" class="btn btn-dark rounded-pill px-4">
                                <i class="fab fa-github me-2"></i>GitHub
                            </a>
                        </div>
                    </div>

                    <div class="col-lg-8">
                        <div class="text-center mb-4">
                            <h5 class="text-muted text-uppercase small ls-1 d-flex align-items-center justify-content-center gap-2">
                                Total Score
                                <i class="fas fa-info-circle info-icon" tabindex="0" data-bs-toggle="popover" data-bs-trigger="hover focus" data-bs-title="점수 산정 기준 및 갱신" data-bs-html="true"
                                   data-bs-content="<ul class='mb-0 small ps-3 text-start'><li><strong>PR Merged</strong>: 10점</li><li><strong>PR Open</strong>: 5점</li><li><strong>Review</strong>: 3점</li><li><strong>Issue</strong>: 2점</li><li><strong>Commit</strong>: 1점</li><hr class='my-2'><li class='text-muted' style='font-size:0.85em'>매일 새벽, <strong>최근 1년 간의 활동</strong>만 자동 반영됩니다.</li><li class='text-muted' style='font-size:0.85em'><strong>수동 갱신이 필요한 경우:</strong><br>- <strong>1년 이전의 활동</strong>이 변경되었을 때 (예: Private → Public)<br>- 방금 기여한 내용을 즉시 반영하고 싶을 때</li><li class='text-danger mt-1' style='font-size:0.85em'>※ 7일에 1회만 가능합니다.</li></ul>">
                                </i>
                            </h5>
                            <h1 class="display-3 fw-bold text-primary" id="resTotalScore"></h1>

                            <div class="mb-4">
                                <button id="btnRefresh" class="btn btn-sm btn-outline-primary rounded-pill px-3 mb-2">
                                    <i class="fas fa-sync-alt me-1"></i> <span>데이터 갱신하기</span>
                                </button>
                                <div id="refreshStatusText" class="small text-muted font-code" style="font-size: 0.8rem;"></div>
                            </div>

                            <div class="d-flex justify-content-center gap-2">
                                <button class="btn btn-outline-dark btn-sm" onclick="copyBadgeMarkdown()">
                                    <i class="fab fa-markdown"></i> README 배지 복사
                                </button>
                                <input type="hidden" id="resNodeId">
                                <input type="hidden" id="resUsername">
                            </div>
                        </div>

                        <div class="row g-3 text-center">
                            <div class="col-4 col-md">
                                <div class="p-3 bg-light rounded stat-card">
                                    <div class="fs-4 text-secondary mb-1"><i class="fas fa-code-commit"></i></div>
                                    <div class="small text-muted">Commits</div>
                                    <div class="fw-bold fs-5"><span id="statCommit">0</span><span id="diffCommit" class="badge rounded-pill bg-success diff-badge" style="display: none;"></span></div>
                                </div>
                            </div>
                            <div class="col-4 col-md">
                                <div class="p-3 bg-light rounded stat-card">
                                    <div class="fs-4 text-warning mb-1"><i class="fas fa-exclamation-circle"></i></div>
                                    <div class="small text-muted">Issues</div>
                                    <div class="fw-bold fs-5"><span id="statIssue">0</span><span id="diffIssue" class="badge rounded-pill bg-danger diff-badge" style="display: none;"></span></div>
                                </div>
                            </div>
                            <div class="col-4 col-md">
                                <div class="p-3 bg-light rounded stat-card">
                                    <div class="fs-4 text-info mb-1"><i class="far fa-message"></i></div>
                                    <div class="small text-muted">Reviews</div>
                                    <div class="fw-bold fs-5"><span id="statReview">0</span><span id="diffReview" class="badge rounded-pill bg-success diff-badge" style="display: none;"></span></div>
                                </div>
                            </div>
                            <div class="col-6 col-md">
                                <div class="p-3 bg-light rounded stat-card">
                                    <div class="fs-4 text-success mb-1"><i class="fas fa-code-pull-request"></i></div>
                                    <div class="small text-muted">PR Open</div>
                                    <div class="fw-bold fs-5"><span id="statPrOpen">0</span><span id="diffPrOpen" class="badge rounded-pill bg-secondary diff-badge" style="display: none;"></span></div>
                                </div>
                            </div>
                            <div class="col-6 col-md">
                                <div class="p-3 bg-light rounded stat-card">
                                    <div class="fs-4 text-purple mb-1" style="color: #6f42c1;"><i class="fas fa-code-merge"></i></div>
                                    <div class="small text-muted">PR Merged</div>
                                    <div class="fw-bold fs-5"><span id="statPrMerged">0</span><span id="diffPrMerged" class="badge rounded-pill bg-success diff-badge" style="display: none;"></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="row justify-content-center mb-4">
        <div class="col-md-8 text-center">
            <div class="alert alert-light border shadow-sm d-inline-block px-5 py-3">
                <h5 class="mb-2 text-secondary fw-bold">
                    <i class="fas fa-stopwatch text-primary me-1"></i> 다음 랭킹 갱신까지
                    <span id="countdownTimer" class="fw-bold text-dark ms-2">--:--</span>
                </h5>
                <p class="mb-0 small text-muted">
                    <i class="fas fa-sync-alt fa-spin me-1" style="font-size: 0.7rem;"></i>
                    매 정각마다 전체 순위와 티어가 자동으로 재산정됩니다.
                </p>
            </div>
        </div>
    </section>

    <section class="mb-5">
        <h3 class="fw-bold mb-4"><i class="fas fa-trophy text-warning"></i> 전체 랭킹</h3>
        <div class="card shadow-sm">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0 text-center">
                    <thead class="table-light">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Tier</th>
                        <th scope="col" class="text-start">User</th>
                        <th scope="col">Total Score</th>
                        <th scope="col">Detail</th>
                    </tr>
                    </thead>
                    <tbody id="rankingTableBody">
                    <tr><td colspan="6" class="py-4 text-muted">랭킹 데이터를 불러오는 중...</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="card-footer bg-white py-3">
                <nav><ul class="pagination justify-content-center mb-0" id="pagination"></ul></nav>
            </div>
        </div>
    </section>
</main>

<footer class="bg-dark text-white py-4 mt-5">
    <div class="container text-center">
        <p class="mb-1">&copy; 2025 Git Ranker. All rights reserved.</p>
        <p class="small text-white-50">Designed by <a href="https://github.com/alexization" class="text-white text-decoration-underline" target="_blank">@alexization</a></p>
    </div>
</footer>

<div class="modal fade" id="userDetailModal" tabindex="-1" aria-labelledby="userDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header border-0 pb-0">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center pb-5 pt-0">
                <div class="mb-4">
                    <img id="modalProfileImage" src="" alt="Profile" class="rounded-circle shadow-sm mb-3" width="100" height="100">
                    <h3 id="modalUsername" class="fw-bold mb-1"></h3>
                    <div id="modalTierBadge" class="d-inline-block px-3 py-1 rounded-pill bg-light fw-bold border mb-2"></div>
                    <p class="text-muted small mb-0">
                        전체 <span id="modalRanking" class="fw-bold text-dark font-code"></span>위
                        (상위 <span id="modalPercentile" class="fw-bold text-dark font-code"></span>%)
                    </p>
                </div>
                <div class="mb-4">
                    <h2 class="display-4 fw-bold text-primary mb-0" id="modalTotalScore"></h2>
                    <span class="text-muted small text-uppercase ls-1">Total Score</span>
                </div>
                <div class="row g-2 justify-content-center">
                    <div class="col-4"><div class="p-2 bg-light rounded border"><div class="small text-muted"><i class="fas fa-code-commit"></i> Commits</div><div class="fw-bold fs-5"><span id="modalStatCommit">0</span><span id="modalDiffCommit" class="badge rounded-pill bg-success diff-badge"></span></div></div></div>
                    <div class="col-4"><div class="p-2 bg-light rounded border"><div class="small text-muted"><i class="fas fa-exclamation-circle"></i> Issues</div><div class="fw-bold fs-5"><span id="modalStatIssue">0</span><span id="modalDiffIssue" class="badge rounded-pill bg-danger diff-badge"></span></div></div></div>
                    <div class="col-4"><div class="p-2 bg-light rounded border"><div class="small text-muted"><i class="far fa-message"></i> Reviews</div><div class="fw-bold fs-5"><span id="modalStatReview">0</span><span id="modalDiffReview" class="badge rounded-pill bg-success diff-badge"></span></div></div></div>
                    <div class="col-6"><div class="p-2 bg-light rounded border"><div class="small text-muted"><i class="fas fa-code-pull-request"></i> PR Open</div><div class="fw-bold fs-5"><span id="modalStatPrOpen">0</span><span id="modalDiffPrOpen" class="badge rounded-pill bg-secondary diff-badge"></span></div></div></div>
                    <div class="col-6"><div class="p-2 bg-light rounded border"><div class="small text-muted"><i class="fas fa-code-merge"></i> PR Merged</div><div class="fw-bold fs-5"><span id="modalStatPrMerged">0</span><span id="modalDiffPrMerged" class="badge rounded-pill bg-success diff-badge"></span></div></div></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script type="module" src="/js/main.js"></script>

</body>
</html>